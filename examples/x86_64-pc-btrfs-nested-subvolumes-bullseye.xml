<!--
SPDX-License-Identifier: 0BSD
SPDX-FileCopyrightText: Daniel Braunwarth <daniel@braunwarth.dev>
-->
<ns0:RootFileSystem xmlns:ns0="https://www.linutronix.de/projects/Elbe"
		    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		    created="2022-11-03T18:01:38" revision="6"
		    xsi:schemaLocation="https://www.linutronix.de/projects/Elbe dbsfed.xsd">
	<project>
		<name>x86_64-pc-btrfs-nested-subvolumes-bullseye</name>
		<version>1.0</version>
		<description>
			btrfs nested subvolumes example

			Boot the image using QEMU:
			$ tar -xaf sda.qcow2.tar.zst
			$ cp /usr/share/edk2-ovmf/x64/OVMF_VARS.fd OVMF_VARS.fd
			$ qemu-system-x86_64 \
				-accel kvm \
				-machine q35 \
				-smp 4 \
				-m 2048 \
				-drive if=pflash,format=raw,readonly=on,file=/usr/share/edk2-ovmf/x64/OVMF_CODE.fd \
				-drive if=pflash,format=raw,file=./OVMF_VARS.fd \
				sda.qcow2
		</description>
		<buildtype>amd64</buildtype>
		<mirror>
			<primary_host>ftp.de.debian.org</primary_host>
			<primary_path>/debian</primary_path>
			<primary_proto>http</primary_proto>
			<url-list>
				<url>
					<binary>http://security.debian.org/debian-security bullseye-security main</binary>
					<source>http://security.debian.org/debian-security bullseye-security main</source>
				</url>
			</url-list>
		</mirror>
		<suite>bullseye</suite>
	</project>
	<target>
		<hostname>elbe-btrfs-nested-subvolumes</hostname>
		<domain>tec.linutronix.de</domain>
		<passwd>foo</passwd>
		<console>ttyS0,115200</console>
		<images>
			<gpthd>
				<name>sda.img</name>
				<size>2GiB</size>
				<grub-install/>
				<partition>
					<size>200MiB</size>
					<label>uefi</label>
					<bootable>true</bootable>
				</partition>
				<partition>
					<size>remain</size>
					<label>rfs</label>
				</partition>
			</gpthd>
		</images>
		<fstab>
			<bylabel>
				<label>uefi</label>
				<mountpoint>/boot/efi</mountpoint>
				<fs>
					<type>vfat</type>
				</fs>
			</bylabel>
			<bylabel>
				<label>rfs</label>
				<mountpoint>/</mountpoint>
				<fs>
					<type>btrfs</type>
					<subvolumes>
						<subvolume>
							<name>home</name>
						</subvolume>
					</subvolumes>
				</fs>
			</bylabel>
		</fstab>
		<install-recommends />
		<pkg-list>
			<pkg>grub-efi-amd64-signed</pkg>
			<pkg>shim-signed</pkg>
			<pkg>linux-image-amd64</pkg>
			<pkg>btrfs-progs</pkg>
		</pkg-list>
		<project-finetuning>
			<img_convert fmt="qcow2" dst="sda.qcow2">sda.img</img_convert>
			<set_packer packer="tarzstd">sda.qcow2</set_packer>
		</project-finetuning>
	</target>
</ns0:RootFileSystem>
